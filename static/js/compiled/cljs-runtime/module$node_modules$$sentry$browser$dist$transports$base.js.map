{
"version":3,
"file":"module$node_modules$$sentry$browser$dist$transports$base.js",
"lineCount":5,
"mappings":"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",
"sources":["node_modules/@sentry/browser/dist/transports/base.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$browser$dist$transports$base\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@sentry/core\");\nvar types_1 = require(\"@sentry/types\");\nvar utils_1 = require(\"@sentry/utils\");\n/** Base Transport class implementation */\nvar BaseTransport = /** @class */ (function () {\n    function BaseTransport(options) {\n        this.options = options;\n        /** A simple buffer holding all requests. */\n        this._buffer = new utils_1.PromiseBuffer(30);\n        /** Locks transport after receiving rate limits in a response */\n        this._rateLimits = {};\n        this._api = new core_1.API(this.options.dsn);\n        // eslint-disable-next-line deprecation/deprecation\n        this.url = this._api.getStoreEndpointWithUrlEncodedAuth();\n    }\n    /**\n     * @inheritDoc\n     */\n    BaseTransport.prototype.sendEvent = function (_) {\n        throw new utils_1.SentryError('Transport Class has to implement `sendEvent` method');\n    };\n    /**\n     * @inheritDoc\n     */\n    BaseTransport.prototype.close = function (timeout) {\n        return this._buffer.drain(timeout);\n    };\n    /**\n     * Handle Sentry repsonse for promise-based transports.\n     */\n    BaseTransport.prototype._handleResponse = function (_a) {\n        var requestType = _a.requestType, response = _a.response, headers = _a.headers, resolve = _a.resolve, reject = _a.reject;\n        var status = types_1.Status.fromHttpCode(response.status);\n        /**\n         * \"The name is case-insensitive.\"\n         * https://developer.mozilla.org/en-US/docs/Web/API/Headers/get\n         */\n        var limited = this._handleRateLimit(headers);\n        if (limited)\n            utils_1.logger.warn(\"Too many requests, backing off till: \" + this._disabledUntil(requestType));\n        if (status === types_1.Status.Success) {\n            resolve({ status: status });\n            return;\n        }\n        reject(response);\n    };\n    /**\n     * Gets the time that given category is disabled until for rate limiting\n     */\n    BaseTransport.prototype._disabledUntil = function (category) {\n        return this._rateLimits[category] || this._rateLimits.all;\n    };\n    /**\n     * Checks if a category is rate limited\n     */\n    BaseTransport.prototype._isRateLimited = function (category) {\n        return this._disabledUntil(category) > new Date(Date.now());\n    };\n    /**\n     * Sets internal _rateLimits from incoming headers. Returns true if headers contains a non-empty rate limiting header.\n     */\n    BaseTransport.prototype._handleRateLimit = function (headers) {\n        var e_1, _a, e_2, _b;\n        var now = Date.now();\n        var rlHeader = headers['x-sentry-rate-limits'];\n        var raHeader = headers['retry-after'];\n        if (rlHeader) {\n            try {\n                for (var _c = tslib_1.__values(rlHeader.trim().split(',')), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var limit = _d.value;\n                    var parameters = limit.split(':', 2);\n                    var headerDelay = parseInt(parameters[0], 10);\n                    var delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1000; // 60sec default\n                    try {\n                        for (var _e = (e_2 = void 0, tslib_1.__values(parameters[1].split(';'))), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var category = _f.value;\n                            this._rateLimits[category || 'all'] = new Date(now + delay);\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return true;\n        }\n        else if (raHeader) {\n            this._rateLimits.all = new Date(now + utils_1.parseRetryAfterHeader(now, raHeader));\n            return true;\n        }\n        return false;\n    };\n    return BaseTransport;\n}());\nexports.BaseTransport = BaseTransport;\n//# sourceMappingURL=base.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","core_1","types_1","utils_1","BaseTransport","options","_buffer","PromiseBuffer","_rateLimits","_api","API","dsn","url","getStoreEndpointWithUrlEncodedAuth","prototype","sendEvent","BaseTransport.prototype.sendEvent","_","SentryError","close","BaseTransport.prototype.close","timeout","drain","_handleResponse","BaseTransport.prototype._handleResponse","_a","requestType","response","headers","resolve","reject","status","Status","fromHttpCode","limited","_handleRateLimit","logger","warn","_disabledUntil","Success","BaseTransport.prototype._disabledUntil","category","all","_isRateLimited","BaseTransport.prototype._isRateLimited","Date","now","BaseTransport.prototype._handleRateLimit","e_2","_b","rlHeader","raHeader","_c","__values","trim","split","_d","next","done","parameters","headerDelay","parseInt","delay","isNaN","_e","_f","e_2_1","error","return","call","e_1_1","e_1","parseRetryAfterHeader"]
}
