shadow$provide.module$node_modules$d3_octree$dist$d3_octree=function(global$jscomp$0,require,module,exports$jscomp$0){(function(global,factory){"object"===typeof exports$jscomp$0&&"undefined"!==typeof module?factory(exports$jscomp$0):"function"===typeof define&&define.amd?define(["exports"],factory):(global=global||self,factory(global.d3=global.d3||{}))})(this,function(exports){function add(tree,x,y,z,d){if(isNaN(x)||isNaN(y)||isNaN(z))return tree;var parent,node=tree._root;d={data:d};var x0=tree._x0,
y0=tree._y0,z0=tree._z0,x1=tree._x1,y1=tree._y1,z1=tree._z1,xm,ym,zm,right,bottom,deep;if(!node)return tree._root=d,tree;for(;node.length;)if((right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,(deep=z>=(zm=(z0+z1)/2))?z0=zm:z1=zm,parent=node,!(node=node[right|=deep<<2|bottom<<1]))return parent[right]=d,tree;var xp=+tree._x.call(null,node.data);var yp=+tree._y.call(null,node.data);var zp=+tree._z.call(null,node.data);if(x===xp&&y===yp&&z===zp)return d.next=node,parent?parent[right]=
d:tree._root=d,tree;do parent=parent?parent[right]=Array(8):tree._root=Array(8),(right=x>=(xm=(x0+x1)/2))?x0=xm:x1=xm,(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym,(deep=z>=(zm=(z0+z1)/2))?z0=zm:z1=zm;while((right|=deep<<2|bottom<<1)===(bottom=(zp>=zm)<<2|(yp>=ym)<<1|xp>=xm));return parent[bottom]=node,parent[right]=d,tree}function Octant(node,x0,y0,z0,x1,y1,z1){this.node=node;this.x0=x0;this.y0=y0;this.z0=z0;this.x1=x1;this.y1=y1;this.z1=z1}function defaultX(d){return d[0]}function defaultY(d){return d[1]}
function defaultZ(d){return d[2]}function octree(nodes,x,y,z){x=new Octree(null==x?defaultX:x,null==y?defaultY:y,null==z?defaultZ:z,NaN,NaN,NaN,NaN,NaN,NaN);return null==nodes?x:x.addAll(nodes)}function Octree(x,y,z,x0,y0,z0,x1,y1,z1){this._x=x;this._y=y;this._z=z;this._x0=x0;this._y0=y0;this._z0=z0;this._x1=x1;this._y1=y1;this._z1=z1;this._root=void 0}function leaf_copy(leaf){for(var copy={data:leaf.data},next=copy;leaf=leaf.next;)next=next.next={data:leaf.data};return copy}var treeProto=octree.prototype=
Octree.prototype;treeProto.copy=function(){var copy=new Octree(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),node=this._root,nodes,child;if(!node)return copy;if(!node.length)return copy._root=leaf_copy(node),copy;for(nodes=[{source:node,target:copy._root=Array(8)}];node=nodes.pop();)for(var i=0;8>i;++i)if(child=node.source[i])child.length?nodes.push({source:child,target:node.target[i]=Array(8)}):node.target[i]=leaf_copy(child);return copy};treeProto.add=function(d){var x=
+this._x.call(null,d),y=+this._y.call(null,d),z=+this._z.call(null,d);return add(this.cover(x,y,z),x,y,z,d)};treeProto.addAll=function(data){var d,i,n=data.length,x,y,z,xz=Array(n),yz=Array(n),zz=Array(n),x0=Infinity,y0=Infinity,z0=Infinity,x1=-Infinity,y1=-Infinity,z1=-Infinity;for(i=0;i<n;++i)isNaN(x=+this._x.call(null,d=data[i]))||isNaN(y=+this._y.call(null,d))||isNaN(z=+this._z.call(null,d))||(xz[i]=x,yz[i]=y,zz[i]=z,x<x0&&(x0=x),x>x1&&(x1=x),y<y0&&(y0=y),y>y1&&(y1=y),z<z0&&(z0=z),z>z1&&(z1=z));
x1<x0&&(x0=this._x0,x1=this._x1);y1<y0&&(y0=this._y0,y1=this._y1);z1<z0&&(z0=this._z0,z1=this._z1);this.cover(x0,y0,z0).cover(x1,y1,z1);for(i=0;i<n;++i)add(this,xz[i],yz[i],zz[i],data[i]);return this};treeProto.cover=function(x,y,z){if(isNaN(x=+x)||isNaN(y=+y)||isNaN(z=+z))return this;var x0=this._x0,y0=this._y0,z0=this._z0,x1=this._x1,y1=this._y1,z1=this._z1;if(isNaN(x0))x1=(x0=Math.floor(x))+1,y1=(y0=Math.floor(y))+1,z1=(z0=Math.floor(z))+1;else if(x0>x||x>x1||y0>y||y>y1||z0>z||z>z1){var t=x1-x0,
node=this._root,i;switch(i=(z<(z0+z1)/2)<<2|(y<(y0+y1)/2)<<1|x<(x0+x1)/2){case 0:do{var parent=Array(8);parent[i]=node;node=parent}while(t*=2,x1=x0+t,y1=y0+t,z1=z0+t,x>x1||y>y1||z>z1);break;case 1:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x0=x1-t,y1=y0+t,z1=z0+t,x0>x||y>y1||z>z1);break;case 2:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x1=x0+t,y0=y1-t,z1=z0+t,x>x1||y0>y||z>z1);break;case 3:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x0=x1-t,y0=y1-t,z1=z0+t,
x0>x||y0>y||z>z1);break;case 4:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x1=x0+t,y1=y0+t,z0=z1-t,x>x1||y>y1||z0>z);break;case 5:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x0=x1-t,y1=y0+t,z0=z1-t,x0>x||y>y1||z0>z);break;case 6:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x1=x0+t,y0=y1-t,z0=z1-t,x>x1||y0>y||z0>z);break;case 7:do parent=Array(8),parent[i]=node,node=parent;while(t*=2,x0=x1-t,y0=y1-t,z0=z1-t,x0>x||y0>y||z0>z)}this._root&&this._root.length&&(this._root=
node)}else return this;this._x0=x0;this._y0=y0;this._z0=z0;this._x1=x1;this._y1=y1;this._z1=z1;return this};treeProto.data=function(){var data=[];this.visit(function(node){if(!node.length){do data.push(node.data);while(node=node.next)}});return data};treeProto.extent=function(_){return arguments.length?this.cover(+_[0][0],+_[0][1],+_[0][2]).cover(+_[1][0],+_[1][1],+_[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]};treeProto.find=function(x,y,z,radius){var x0=
this._x0,y0=this._y0,z0=this._z0,x1,y1,z1,x2,y2,z2,x3=this._x1,y3=this._y1,z3=this._z1,octs=[],node=this._root,q;node&&octs.push(new Octant(node,x0,y0,z0,x3,y3,z3));null==radius?radius=Infinity:(x0=x-radius,y0=y-radius,z0=z-radius,x3=x+radius,y3=y+radius,z3=z+radius,radius*=radius);for(;q=octs.pop();)if(!(!(node=q.node)||(x1=q.x0)>x3||(y1=q.y0)>y3||(z1=q.z0)>z3||(x2=q.x1)<x0||(y2=q.y1)<y0||(z2=q.z1)<z0))if(node.length){q=(x1+x2)/2;var ym=(y1+y2)/2,zm=(z1+z2)/2;octs.push(new Octant(node[7],q,ym,zm,
x2,y2,z2),new Octant(node[6],x1,ym,zm,q,y2,z2),new Octant(node[5],q,y1,zm,x2,ym,z2),new Octant(node[4],x1,y1,zm,q,ym,z2),new Octant(node[3],q,ym,z1,x2,y2,zm),new Octant(node[2],x1,ym,z1,q,y2,zm),new Octant(node[1],q,y1,z1,x2,ym,zm),new Octant(node[0],x1,y1,z1,q,ym,zm));if(node=(z>=zm)<<2|(y>=ym)<<1|x>=q)q=octs[octs.length-1],octs[octs.length-1]=octs[octs.length-1-node],octs[octs.length-1-node]=q}else if(q=x-+this._x.call(null,node.data),ym=y-+this._y.call(null,node.data),zm=z-+this._z.call(null,node.data),
q=q*q+ym*ym+zm*zm,q<radius){var data=Math.sqrt(radius=q);x0=x-data;y0=y-data;z0=z-data;x3=x+data;y3=y+data;z3=z+data;data=node.data}return data};treeProto.remove=function(d){if(isNaN(x=+this._x.call(null,d))||isNaN(y=+this._y.call(null,d))||isNaN(z=+this._z.call(null,d)))return this;var parent,node=this._root,previous,x0=this._x0,y0=this._y0,z0=this._z0,x1=this._x1,y1=this._y1,z1=this._z1,x,y,z,xm,ym,zm,right,bottom,deep;if(!node)return this;if(node.length)for(;;){(right=x>=(xm=(x0+x1)/2))?x0=xm:
x1=xm;(bottom=y>=(ym=(y0+y1)/2))?y0=ym:y1=ym;(deep=z>=(zm=(z0+z1)/2))?z0=zm:z1=zm;if(!(parent=node,node=node[right|=deep<<2|bottom<<1]))return this;if(!node.length)break;if(parent[right+1&7]||parent[right+2&7]||parent[right+3&7]||parent[right+4&7]||parent[right+5&7]||parent[right+6&7]||parent[right+7&7]){var retainer=parent;var j=right}}for(;node.data!==d;)if(!(previous=node,node=node.next))return this;(d=node.next)&&delete node.next;if(previous)return d?previous.next=d:delete previous.next,this;
if(!parent)return this._root=d,this;d?parent[right]=d:delete parent[right];(node=parent[0]||parent[1]||parent[2]||parent[3]||parent[4]||parent[5]||parent[6]||parent[7])&&node===(parent[7]||parent[6]||parent[5]||parent[4]||parent[3]||parent[2]||parent[1]||parent[0])&&!node.length&&(retainer?retainer[j]=node:this._root=node);return this};treeProto.removeAll=function(data){for(var i=0,n=data.length;i<n;++i)this.remove(data[i]);return this};treeProto.root=function(){return this._root};treeProto.size=
function(){var size=0;this.visit(function(node){if(!node.length){do++size;while(node=node.next)}});return size};treeProto.visit=function(callback){var octs=[],q,node=this._root,child,x0,y0,z0,x1,y1;for(node&&octs.push(new Octant(node,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));q=octs.pop();)if(!callback(node=q.node,x0=q.x0,y0=q.y0,z0=q.z0,x1=q.x1,y1=q.y1,q=q.z1)&&node.length){var xm=(x0+x1)/2,ym=(y0+y1)/2,zm=(z0+q)/2;(child=node[7])&&octs.push(new Octant(child,xm,ym,zm,x1,y1,q));(child=
node[6])&&octs.push(new Octant(child,x0,ym,zm,xm,y1,q));(child=node[5])&&octs.push(new Octant(child,xm,y0,zm,x1,ym,q));(child=node[4])&&octs.push(new Octant(child,x0,y0,zm,xm,ym,q));(child=node[3])&&octs.push(new Octant(child,xm,ym,z0,x1,y1,zm));(child=node[2])&&octs.push(new Octant(child,x0,ym,z0,xm,y1,zm));(child=node[1])&&octs.push(new Octant(child,xm,y0,z0,x1,ym,zm));(child=node[0])&&octs.push(new Octant(child,x0,y0,z0,xm,ym,zm))}return this};treeProto.visitAfter=function(callback){var octs=[],
next=[],q;for(this._root&&octs.push(new Octant(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));q=octs.pop();){var node=q.node;if(node.length){var child,x0=q.x0,y0=q.y0,z0=q.z0,x1=q.x1,y1=q.y1,z1=q.z1,xm=(x0+x1)/2,ym=(y0+y1)/2,zm=(z0+z1)/2;(child=node[0])&&octs.push(new Octant(child,x0,y0,z0,xm,ym,zm));(child=node[1])&&octs.push(new Octant(child,xm,y0,z0,x1,ym,zm));(child=node[2])&&octs.push(new Octant(child,x0,ym,z0,xm,y1,zm));(child=node[3])&&octs.push(new Octant(child,xm,ym,z0,
x1,y1,zm));(child=node[4])&&octs.push(new Octant(child,x0,y0,zm,xm,ym,z1));(child=node[5])&&octs.push(new Octant(child,xm,y0,zm,x1,ym,z1));(child=node[6])&&octs.push(new Octant(child,x0,ym,zm,xm,y1,z1));(child=node[7])&&octs.push(new Octant(child,xm,ym,zm,x1,y1,z1))}next.push(q)}for(;q=next.pop();)callback(q.node,q.x0,q.y0,q.z0,q.x1,q.y1,q.z1);return this};treeProto.x=function(_){return arguments.length?(this._x=_,this):this._x};treeProto.y=function(_){return arguments.length?(this._y=_,this):this._y};
treeProto.z=function(_){return arguments.length?(this._z=_,this):this._z};exports.octree=octree;Object.defineProperty(exports,"__esModule",{value:!0})})}
//# sourceMappingURL=module$node_modules$d3_octree$dist$d3_octree.js.map
