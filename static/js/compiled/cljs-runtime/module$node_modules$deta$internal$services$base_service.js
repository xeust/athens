shadow$provide.module$node_modules$deta$internal$services$base_service=function(global,require,module,exports){const fetchModule=require("module$node_modules$deta$internal$fetch"),https=require("module$node_modules$https_browserify$index");class BaseService{constructor(deta){this._getDeta=()=>deta;const agent=new https.Agent({keepAlive:!0});this._getAgent=()=>agent}get _agent(){return this._getAgent()}get _deta(){return this._getDeta()}get _baseURL(){const {projectId,host}=this._deta.config;return`https://${host}/${projectId}`}get headers(){const {projectKey}=
this._deta.config;return{"X-API-Key":projectKey,"Content-Type":"application/json"}}async request(route,payload,method="GET"){const {fetch:_fetch}=fetchModule,request={method,headers:this.headers};"GET"!==method&&(request.body=JSON.stringify(payload));request.agent=this._agent;payload=await _fetch(`${this._baseURL}${route}`,request);route=payload.status;if(401===route)throw Error("Unauthorized");payload=await payload.json();return{status:route,response:payload}}}module.exports=BaseService}
//# sourceMappingURL=module$node_modules$deta$internal$services$base_service.js.map
