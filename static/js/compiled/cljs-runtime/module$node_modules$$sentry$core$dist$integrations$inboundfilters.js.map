{
"version":3,
"file":"module$node_modules$$sentry$core$dist$integrations$inboundfilters.js",
"lineCount":9,
"mappings":"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",
"sources":["node_modules/@sentry/core/dist/integrations/inboundfilters.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$core$dist$integrations$inboundfilters\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar hub_1 = require(\"@sentry/hub\");\nvar utils_1 = require(\"@sentry/utils\");\n// \"Script error.\" is hard coded into browsers for errors that it can't read.\n// this is the result of a script being pulled in from an external domain and CORS.\nvar DEFAULT_IGNORE_ERRORS = [/^Script error\\.?$/, /^Javascript error: Script error\\.? on line 0$/];\n/** Inbound filters configurable by the user */\nvar InboundFilters = /** @class */ (function () {\n    function InboundFilters(_options) {\n        if (_options === void 0) { _options = {}; }\n        this._options = _options;\n        /**\n         * @inheritDoc\n         */\n        this.name = InboundFilters.id;\n    }\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.prototype.setupOnce = function () {\n        hub_1.addGlobalEventProcessor(function (event) {\n            var hub = hub_1.getCurrentHub();\n            if (!hub) {\n                return event;\n            }\n            var self = hub.getIntegration(InboundFilters);\n            if (self) {\n                var client = hub.getClient();\n                var clientOptions = client ? client.getOptions() : {};\n                var options = self._mergeOptions(clientOptions);\n                if (self._shouldDropEvent(event, options)) {\n                    return null;\n                }\n            }\n            return event;\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._shouldDropEvent = function (event, options) {\n        if (this._isSentryError(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being internal Sentry Error.\\nEvent: \" + utils_1.getEventDescription(event));\n            return true;\n        }\n        if (this._isIgnoredError(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being matched by `ignoreErrors` option.\\nEvent: \" + utils_1.getEventDescription(event));\n            return true;\n        }\n        if (this._isDeniedUrl(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to being matched by `denyUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            return true;\n        }\n        if (!this._isAllowedUrl(event, options)) {\n            utils_1.logger.warn(\"Event dropped due to not being matched by `allowUrls` option.\\nEvent: \" + utils_1.getEventDescription(event) + \".\\nUrl: \" + this._getEventFilterUrl(event));\n            return true;\n        }\n        return false;\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isSentryError = function (event, options) {\n        if (!options.ignoreInternal) {\n            return false;\n        }\n        try {\n            return ((event &&\n                event.exception &&\n                event.exception.values &&\n                event.exception.values[0] &&\n                event.exception.values[0].type === 'SentryError') ||\n                false);\n        }\n        catch (_oO) {\n            return false;\n        }\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isIgnoredError = function (event, options) {\n        if (!options.ignoreErrors || !options.ignoreErrors.length) {\n            return false;\n        }\n        return this._getPossibleEventMessages(event).some(function (message) {\n            // Not sure why TypeScript complains here...\n            return options.ignoreErrors.some(function (pattern) { return utils_1.isMatchingPattern(message, pattern); });\n        });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isDeniedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.denyUrls || !options.denyUrls.length) {\n            return false;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? false : options.denyUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._isAllowedUrl = function (event, options) {\n        // TODO: Use Glob instead?\n        if (!options.allowUrls || !options.allowUrls.length) {\n            return true;\n        }\n        var url = this._getEventFilterUrl(event);\n        return !url ? true : options.allowUrls.some(function (pattern) { return utils_1.isMatchingPattern(url, pattern); });\n    };\n    /** JSDoc */\n    InboundFilters.prototype._mergeOptions = function (clientOptions) {\n        if (clientOptions === void 0) { clientOptions = {}; }\n        return {\n            allowUrls: tslib_1.__spread((this._options.whitelistUrls || []), (this._options.allowUrls || []), (clientOptions.whitelistUrls || []), (clientOptions.allowUrls || [])),\n            denyUrls: tslib_1.__spread((this._options.blacklistUrls || []), (this._options.denyUrls || []), (clientOptions.blacklistUrls || []), (clientOptions.denyUrls || [])),\n            ignoreErrors: tslib_1.__spread((this._options.ignoreErrors || []), (clientOptions.ignoreErrors || []), DEFAULT_IGNORE_ERRORS),\n            ignoreInternal: typeof this._options.ignoreInternal !== 'undefined' ? this._options.ignoreInternal : true,\n        };\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getPossibleEventMessages = function (event) {\n        if (event.message) {\n            return [event.message];\n        }\n        if (event.exception) {\n            try {\n                var _a = (event.exception.values && event.exception.values[0]) || {}, _b = _a.type, type = _b === void 0 ? '' : _b, _c = _a.value, value = _c === void 0 ? '' : _c;\n                return [\"\" + value, type + \": \" + value];\n            }\n            catch (oO) {\n                utils_1.logger.error(\"Cannot extract message for event \" + utils_1.getEventDescription(event));\n                return [];\n            }\n        }\n        return [];\n    };\n    /** JSDoc */\n    InboundFilters.prototype._getEventFilterUrl = function (event) {\n        try {\n            if (event.stacktrace) {\n                var frames_1 = event.stacktrace.frames;\n                return (frames_1 && frames_1[frames_1.length - 1].filename) || null;\n            }\n            if (event.exception) {\n                var frames_2 = event.exception.values && event.exception.values[0].stacktrace && event.exception.values[0].stacktrace.frames;\n                return (frames_2 && frames_2[frames_2.length - 1].filename) || null;\n            }\n            return null;\n        }\n        catch (oO) {\n            utils_1.logger.error(\"Cannot extract url for event \" + utils_1.getEventDescription(event));\n            return null;\n        }\n    };\n    /**\n     * @inheritDoc\n     */\n    InboundFilters.id = 'InboundFilters';\n    return InboundFilters;\n}());\nexports.InboundFilters = InboundFilters;\n//# sourceMappingURL=inboundfilters.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","hub_1","utils_1","DEFAULT_IGNORE_ERRORS","InboundFilters","_options","name","id","prototype","setupOnce","InboundFilters.prototype.setupOnce","addGlobalEventProcessor","event","hub","getCurrentHub","self","getIntegration","clientOptions","client","getClient","getOptions","options","_mergeOptions","_shouldDropEvent","InboundFilters.prototype._shouldDropEvent","_isSentryError","logger","warn","getEventDescription","_isIgnoredError","_isDeniedUrl","_getEventFilterUrl","_isAllowedUrl","InboundFilters.prototype._isSentryError","ignoreInternal","exception","values","type","_oO","InboundFilters.prototype._isIgnoredError","ignoreErrors","length","_getPossibleEventMessages","some","message","pattern","isMatchingPattern","InboundFilters.prototype._isDeniedUrl","denyUrls","url","InboundFilters.prototype._isAllowedUrl","allowUrls","InboundFilters.prototype._mergeOptions","__spread","whitelistUrls","blacklistUrls","InboundFilters.prototype._getPossibleEventMessages","_a","_b","_c","oO","error","InboundFilters.prototype._getEventFilterUrl","stacktrace","frames_1","frames","filename","frames_2"]
}
