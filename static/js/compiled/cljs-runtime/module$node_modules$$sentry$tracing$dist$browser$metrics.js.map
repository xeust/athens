{
"version":3,
"file":"module$node_modules$$sentry$tracing$dist$browser$metrics.js",
"lineCount":16,
"mappings":"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",
"sources":["node_modules/@sentry/tracing/dist/browser/metrics.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$tracing$dist$browser$metrics\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar utils_1 = require(\"@sentry/utils\");\nvar utils_2 = require(\"../utils\");\nvar getCLS_1 = require(\"./web-vitals/getCLS\");\nvar getFID_1 = require(\"./web-vitals/getFID\");\nvar getLCP_1 = require(\"./web-vitals/getLCP\");\nvar getTTFB_1 = require(\"./web-vitals/getTTFB\");\nvar getFirstHidden_1 = require(\"./web-vitals/lib/getFirstHidden\");\nvar global = utils_1.getGlobalObject();\n/** Class tracking metrics  */\nvar MetricsInstrumentation = /** @class */ (function () {\n    function MetricsInstrumentation() {\n        this._measurements = {};\n        this._performanceCursor = 0;\n        if (global && global.performance) {\n            if (global.performance.mark) {\n                global.performance.mark('sentry-tracing-init');\n            }\n            this._trackCLS();\n            this._trackLCP();\n            this._trackFID();\n            this._trackTTFB();\n        }\n    }\n    /** Add performance related spans to a transaction */\n    MetricsInstrumentation.prototype.addPerformanceEntries = function (transaction) {\n        var _this = this;\n        if (!global || !global.performance || !global.performance.getEntries || !utils_1.browserPerformanceTimeOrigin) {\n            // Gatekeeper if performance API not available\n            return;\n        }\n        utils_1.logger.log('[Tracing] Adding & adjusting spans using Performance API');\n        var timeOrigin = utils_2.msToSec(utils_1.browserPerformanceTimeOrigin);\n        var entryScriptSrc;\n        if (global.document) {\n            // eslint-disable-next-line @typescript-eslint/prefer-for-of\n            for (var i = 0; i < document.scripts.length; i++) {\n                // We go through all scripts on the page and look for 'data-entry'\n                // We remember the name and measure the time between this script finished loading and\n                // our mark 'sentry-tracing-init'\n                if (document.scripts[i].dataset.entry === 'true') {\n                    entryScriptSrc = document.scripts[i].src;\n                    break;\n                }\n            }\n        }\n        var entryScriptStartTimestamp;\n        var tracingInitMarkStartTime;\n        global.performance\n            .getEntries()\n            .slice(this._performanceCursor)\n            .forEach(function (entry) {\n            var startTime = utils_2.msToSec(entry.startTime);\n            var duration = utils_2.msToSec(entry.duration);\n            if (transaction.op === 'navigation' && timeOrigin + startTime < transaction.startTimestamp) {\n                return;\n            }\n            switch (entry.entryType) {\n                case 'navigation':\n                    addNavigationSpans(transaction, entry, timeOrigin);\n                    break;\n                case 'mark':\n                case 'paint':\n                case 'measure': {\n                    var startTimestamp = addMeasureSpans(transaction, entry, startTime, duration, timeOrigin);\n                    if (tracingInitMarkStartTime === undefined && entry.name === 'sentry-tracing-init') {\n                        tracingInitMarkStartTime = startTimestamp;\n                    }\n                    // capture web vitals\n                    var firstHidden = getFirstHidden_1.getFirstHidden();\n                    // Only report if the page wasn't hidden prior to the web vital.\n                    var shouldRecord = entry.startTime < firstHidden.timeStamp;\n                    if (entry.name === 'first-paint' && shouldRecord) {\n                        utils_1.logger.log('[Measurements] Adding FP');\n                        _this._measurements['fp'] = { value: entry.startTime };\n                        _this._measurements['mark.fp'] = { value: startTimestamp };\n                    }\n                    if (entry.name === 'first-contentful-paint' && shouldRecord) {\n                        utils_1.logger.log('[Measurements] Adding FCP');\n                        _this._measurements['fcp'] = { value: entry.startTime };\n                        _this._measurements['mark.fcp'] = { value: startTimestamp };\n                    }\n                    break;\n                }\n                case 'resource': {\n                    var resourceName = entry.name.replace(window.location.origin, '');\n                    var endTimestamp = addResourceSpans(transaction, entry, resourceName, startTime, duration, timeOrigin);\n                    // We remember the entry script end time to calculate the difference to the first init mark\n                    if (entryScriptStartTimestamp === undefined && (entryScriptSrc || '').indexOf(resourceName) > -1) {\n                        entryScriptStartTimestamp = endTimestamp;\n                    }\n                    break;\n                }\n                default:\n                // Ignore other entry types.\n            }\n        });\n        if (entryScriptStartTimestamp !== undefined && tracingInitMarkStartTime !== undefined) {\n            _startChild(transaction, {\n                description: 'evaluation',\n                endTimestamp: tracingInitMarkStartTime,\n                op: 'script',\n                startTimestamp: entryScriptStartTimestamp,\n            });\n        }\n        this._performanceCursor = Math.max(performance.getEntries().length - 1, 0);\n        this._trackNavigator(transaction);\n        // Measurements are only available for pageload transactions\n        if (transaction.op === 'pageload') {\n            transaction.setMeasurements(this._measurements);\n        }\n    };\n    /** Starts tracking the Cumulative Layout Shift on the current page. */\n    MetricsInstrumentation.prototype._trackCLS = function () {\n        var _this = this;\n        getCLS_1.getCLS(function (metric) {\n            var entry = metric.entries.pop();\n            if (!entry) {\n                return;\n            }\n            utils_1.logger.log('[Measurements] Adding CLS');\n            _this._measurements['cls'] = { value: metric.value };\n        });\n    };\n    /**\n     * Capture the information of the user agent.\n     */\n    MetricsInstrumentation.prototype._trackNavigator = function (transaction) {\n        var navigator = global.navigator;\n        if (!navigator) {\n            return;\n        }\n        // track network connectivity\n        var connection = navigator.connection;\n        if (connection) {\n            if (connection.effectiveType) {\n                transaction.setTag('effectiveConnectionType', connection.effectiveType);\n            }\n            if (connection.type) {\n                transaction.setTag('connectionType', connection.type);\n            }\n            if (isMeasurementValue(connection.rtt)) {\n                this._measurements['connection.rtt'] = { value: connection.rtt };\n            }\n            if (isMeasurementValue(connection.downlink)) {\n                this._measurements['connection.downlink'] = { value: connection.downlink };\n            }\n        }\n        if (isMeasurementValue(navigator.deviceMemory)) {\n            transaction.setTag('deviceMemory', String(navigator.deviceMemory));\n        }\n        if (isMeasurementValue(navigator.hardwareConcurrency)) {\n            transaction.setTag('hardwareConcurrency', String(navigator.hardwareConcurrency));\n        }\n    };\n    /** Starts tracking the Largest Contentful Paint on the current page. */\n    MetricsInstrumentation.prototype._trackLCP = function () {\n        var _this = this;\n        getLCP_1.getLCP(function (metric) {\n            var entry = metric.entries.pop();\n            if (!entry) {\n                return;\n            }\n            var timeOrigin = utils_2.msToSec(performance.timeOrigin);\n            var startTime = utils_2.msToSec(entry.startTime);\n            utils_1.logger.log('[Measurements] Adding LCP');\n            _this._measurements['lcp'] = { value: metric.value };\n            _this._measurements['mark.lcp'] = { value: timeOrigin + startTime };\n        });\n    };\n    /** Starts tracking the First Input Delay on the current page. */\n    MetricsInstrumentation.prototype._trackFID = function () {\n        var _this = this;\n        getFID_1.getFID(function (metric) {\n            var entry = metric.entries.pop();\n            if (!entry) {\n                return;\n            }\n            var timeOrigin = utils_2.msToSec(performance.timeOrigin);\n            var startTime = utils_2.msToSec(entry.startTime);\n            utils_1.logger.log('[Measurements] Adding FID');\n            _this._measurements['fid'] = { value: metric.value };\n            _this._measurements['mark.fid'] = { value: timeOrigin + startTime };\n        });\n    };\n    /** Starts tracking the Time to First Byte on the current page. */\n    MetricsInstrumentation.prototype._trackTTFB = function () {\n        var _this = this;\n        getTTFB_1.getTTFB(function (metric) {\n            var _a;\n            var entry = metric.entries.pop();\n            if (!entry) {\n                return;\n            }\n            utils_1.logger.log('[Measurements] Adding TTFB');\n            _this._measurements['ttfb'] = { value: metric.value };\n            // Capture the time spent making the request and receiving the first byte of the response\n            var requestTime = metric.value - (_a = metric.entries[0], (_a !== null && _a !== void 0 ? _a : entry)).requestStart;\n            _this._measurements['ttfb.requestTime'] = { value: requestTime };\n        });\n    };\n    return MetricsInstrumentation;\n}());\nexports.MetricsInstrumentation = MetricsInstrumentation;\n/** Instrument navigation entries */\nfunction addNavigationSpans(transaction, entry, timeOrigin) {\n    addPerformanceNavigationTiming(transaction, entry, 'unloadEvent', timeOrigin);\n    addPerformanceNavigationTiming(transaction, entry, 'redirect', timeOrigin);\n    addPerformanceNavigationTiming(transaction, entry, 'domContentLoadedEvent', timeOrigin);\n    addPerformanceNavigationTiming(transaction, entry, 'loadEvent', timeOrigin);\n    addPerformanceNavigationTiming(transaction, entry, 'connect', timeOrigin);\n    addPerformanceNavigationTiming(transaction, entry, 'secureConnection', timeOrigin, 'connectEnd');\n    addPerformanceNavigationTiming(transaction, entry, 'domainLookup', timeOrigin);\n    addRequest(transaction, entry, timeOrigin);\n}\n/** Create measure related spans */\nfunction addMeasureSpans(transaction, entry, startTime, duration, timeOrigin) {\n    var measureStartTimestamp = timeOrigin + startTime;\n    var measureEndTimestamp = measureStartTimestamp + duration;\n    _startChild(transaction, {\n        description: entry.name,\n        endTimestamp: measureEndTimestamp,\n        op: entry.entryType,\n        startTimestamp: measureStartTimestamp,\n    });\n    return measureStartTimestamp;\n}\n/** Create resource related spans */\nfunction addResourceSpans(transaction, entry, resourceName, startTime, duration, timeOrigin) {\n    // we already instrument based on fetch and xhr, so we don't need to\n    // duplicate spans here.\n    if (entry.initiatorType === 'xmlhttprequest' || entry.initiatorType === 'fetch') {\n        return undefined;\n    }\n    var data = {};\n    if ('transferSize' in entry) {\n        data['Transfer Size'] = entry.transferSize;\n    }\n    if ('encodedBodySize' in entry) {\n        data['Encoded Body Size'] = entry.encodedBodySize;\n    }\n    if ('decodedBodySize' in entry) {\n        data['Decoded Body Size'] = entry.decodedBodySize;\n    }\n    var startTimestamp = timeOrigin + startTime;\n    var endTimestamp = startTimestamp + duration;\n    _startChild(transaction, {\n        description: resourceName,\n        endTimestamp: endTimestamp,\n        op: entry.initiatorType ? \"resource.\" + entry.initiatorType : 'resource',\n        startTimestamp: startTimestamp,\n        data: data,\n    });\n    return endTimestamp;\n}\nexports.addResourceSpans = addResourceSpans;\n/** Create performance navigation related spans */\nfunction addPerformanceNavigationTiming(transaction, entry, event, timeOrigin, eventEnd) {\n    var end = eventEnd ? entry[eventEnd] : entry[event + \"End\"];\n    var start = entry[event + \"Start\"];\n    if (!start || !end) {\n        return;\n    }\n    _startChild(transaction, {\n        description: event,\n        endTimestamp: timeOrigin + utils_2.msToSec(end),\n        op: 'browser',\n        startTimestamp: timeOrigin + utils_2.msToSec(start),\n    });\n}\n/** Create request and response related spans */\nfunction addRequest(transaction, entry, timeOrigin) {\n    _startChild(transaction, {\n        description: 'request',\n        endTimestamp: timeOrigin + utils_2.msToSec(entry.responseEnd),\n        op: 'browser',\n        startTimestamp: timeOrigin + utils_2.msToSec(entry.requestStart),\n    });\n    _startChild(transaction, {\n        description: 'response',\n        endTimestamp: timeOrigin + utils_2.msToSec(entry.responseEnd),\n        op: 'browser',\n        startTimestamp: timeOrigin + utils_2.msToSec(entry.responseStart),\n    });\n}\n/**\n * Helper function to start child on transactions. This function will make sure that the transaction will\n * use the start timestamp of the created child span if it is earlier than the transactions actual\n * start timestamp.\n */\nfunction _startChild(transaction, _a) {\n    var startTimestamp = _a.startTimestamp, ctx = tslib_1.__rest(_a, [\"startTimestamp\"]);\n    if (startTimestamp && transaction.startTimestamp > startTimestamp) {\n        transaction.startTimestamp = startTimestamp;\n    }\n    return transaction.startChild(tslib_1.__assign({ startTimestamp: startTimestamp }, ctx));\n}\nexports._startChild = _startChild;\n/**\n * Checks if a given value is a valid measurement value.\n */\nfunction isMeasurementValue(value) {\n    return typeof value === 'number' && isFinite(value);\n}\n//# sourceMappingURL=metrics.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","addResourceSpans","transaction","entry","resourceName","startTime","duration","timeOrigin","initiatorType","data","transferSize","encodedBodySize","decodedBodySize","startTimestamp","endTimestamp","_startChild","description","op","addPerformanceNavigationTiming","event","eventEnd","end","start","utils_2","msToSec","_a","ctx","tslib_1","__rest","startChild","__assign","isMeasurementValue","value","isFinite","Object","defineProperty","utils_1","getCLS_1","getFID_1","getLCP_1","getTTFB_1","getFirstHidden_1","getGlobalObject","MetricsInstrumentation","_measurements","_performanceCursor","performance","mark","_trackCLS","_trackLCP","_trackFID","_trackTTFB","prototype","addPerformanceEntries","MetricsInstrumentation.prototype.addPerformanceEntries","_this","getEntries","browserPerformanceTimeOrigin","logger","log","document","i","scripts","length","dataset","entryScriptSrc","src","entryScriptStartTimestamp","tracingInitMarkStartTime","slice","forEach","entryType","responseEnd","requestStart","responseStart","measureStartTimestamp","name","undefined","firstHidden","getFirstHidden","shouldRecord","timeStamp","replace","window","location","origin","indexOf","Math","max","_trackNavigator","setMeasurements","MetricsInstrumentation.prototype._trackCLS","getCLS","metric","entries","pop","MetricsInstrumentation.prototype._trackNavigator","navigator","connection","effectiveType","setTag","type","rtt","downlink","deviceMemory","String","hardwareConcurrency","MetricsInstrumentation.prototype._trackLCP","getLCP","MetricsInstrumentation.prototype._trackFID","getFID","MetricsInstrumentation.prototype._trackTTFB","getTTFB","requestTime"]
}
