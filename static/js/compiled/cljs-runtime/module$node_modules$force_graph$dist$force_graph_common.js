shadow$provide.module$node_modules$force_graph$dist$force_graph_common=function(global,require,module,exports){function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{"default":e}}function _typeof(obj$jscomp$0){"@babel/helpers - typeof";_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"===typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};return _typeof(obj$jscomp$0)}
function _defineProperty(obj,key,value){key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value;return obj}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=
1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _setPrototypeOf(o$jscomp$0,p$jscomp$0){_setPrototypeOf=Object.setPrototypeOf||function(o,
p){o.__proto__=p;return o};return _setPrototypeOf(o$jscomp$0,p$jscomp$0)}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(Parent,args$jscomp$0,Class$jscomp$0){_construct=_isNativeReflectConstruct()?Reflect.construct:function(Parent,args,Class){var a=[null];a.push.apply(a,
args);Parent=new (Function.bind.apply(Parent,a));Class&&_setPrototypeOf(Parent,Class.prototype);return Parent};return _construct.apply(null,arguments)}function _slicedToArray(arr,i){var JSCompiler_inline_result=Array.isArray(arr)?arr:void 0;if(!JSCompiler_inline_result)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(arr)){JSCompiler_inline_result=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(JSCompiler_inline_result.push(_s.value),!i||
JSCompiler_inline_result.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e;}}}else JSCompiler_inline_result=void 0;if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr,i)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return arr}function _toConsumableArray(arr){var JSCompiler_inline_result=Array.isArray(arr)?
_arrayLikeToArray(arr):void 0;JSCompiler_inline_result||(JSCompiler_inline_result="undefined"!==typeof Symbol&&Symbol.iterator in Object(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return arr}function _unsupportedIterableToArray(o,minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,
minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function autoColorObjects(objects,colorByAccessor,colorField){colorByAccessor&&"string"===typeof colorField&&
objects.filter(function(obj){return!obj[colorField]}).forEach(function(obj){obj[colorField]=autoColorScale(colorByAccessor(obj))})}function getDagDepths(_ref,idAccessor){function traverse(nodes){for(var nodeStack=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],currentDepth=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=0,l=nodes.length;i<l;i++){var node=nodes[i];(-1===nodeStack.indexOf(node)||"continue"!==function(){var loop=[].concat(_toConsumableArray(nodeStack.slice(nodeStack.indexOf(node))),
[node]).map(function(d){return idAccessor(d.data)});foundLoops.some(function(foundLoop){return foundLoop.length===loop.length&&foundLoop.every(function(id,idx){return id===loop[idx]})})||(foundLoops.push(loop),onLoopError(loop));return"continue"}())&&currentDepth>node.depth&&(node.depth=currentDepth,traverse(node.out,[].concat(_toConsumableArray(nodeStack),[node]),currentDepth+(node.skip?0:1)))}}var links=_ref.links,_ref2=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},_ref2$nodeFilter=
_ref2.nodeFilter,nodeFilter=void 0===_ref2$nodeFilter?function(){return!0}:_ref2$nodeFilter;_ref2=_ref2.onLoopError;var onLoopError=void 0===_ref2?function(loopIds){throw"Invalid DAG structure! Found cycle in node path: ".concat(loopIds.join(" -\x3e "),".");}:_ref2,graph={};_ref.nodes.forEach(function(node){return graph[idAccessor(node)]={data:node,out:[],depth:-1,skip:!nodeFilter(node)}});links.forEach(function(_ref3){function getNodeId(node){return"object"===_typeof(node)?idAccessor(node):node}
var target=_ref3.target;_ref3=getNodeId(_ref3.source);target=getNodeId(target);if(!graph.hasOwnProperty(_ref3))throw"Missing source node with id: ".concat(_ref3);if(!graph.hasOwnProperty(target))throw"Missing target node with id: ".concat(target);graph[_ref3].out.push(graph[target])});var foundLoops=[];traverse(Object.values(graph));return Object.assign.apply(Object,[{}].concat(_toConsumableArray(Object.entries(graph).filter(function(_ref4){return!_slicedToArray(_ref4,2)[1].skip}).map(function(_ref6){_ref6=
_slicedToArray(_ref6,2);return _defineProperty({},_ref6[0],_ref6[1].depth)}))))}function linkKapsule(kapsulePropNames,kapsuleType){var propNames=kapsulePropNames instanceof Array?kapsulePropNames:[kapsulePropNames],dummyK=new kapsuleType;return{linkProp:function(prop){return{"default":dummyK[prop](),onChange:function(v,state){propNames.forEach(function(propName){return state[propName][prop](v)})},triggerUpdate:!1}},linkMethod:function(method){return function(state){for(var _len=arguments.length,args=
Array(1<_len?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var returnVals=[];propNames.forEach(function(propName){propName=state[propName];var returnVal=propName[method].apply(propName,args);returnVal!==propName&&returnVals.push(returnVal)});return returnVals.length?returnVals[0]:this}}}}function adjustCanvasSize(state){if(state.canvas){var curWidth=state.canvas.width,curHeight=state.canvas.height;300===curWidth&&150===curHeight&&(curWidth=curHeight=0);var pxScale=window.devicePixelRatio;
curWidth/=pxScale;curHeight/=pxScale;[state.canvas,state.shadowCanvas].forEach(function(canvas){canvas.style.width="".concat(state.width,"px");canvas.style.height="".concat(state.height,"px");canvas.width=state.width*pxScale;canvas.height=state.height*pxScale;curWidth||curHeight||canvas.getContext("2d").scale(pxScale,pxScale)});var k=d3Zoom.zoomTransform(state.canvas).k;state.zoom.translateBy(state.zoom.__baseElem,(state.width-curWidth)/2/k,(state.height-curHeight)/2/k)}}function resetTransform(ctx){var pxRatio=
window.devicePixelRatio;ctx.setTransform(pxRatio,0,0,pxRatio,0,0)}function clearCanvas(ctx,width,height){ctx.save();resetTransform(ctx);ctx.clearRect(0,0,width,height);ctx.restore()}var d3Selection=require("module$node_modules$d3_selection$dist$d3_selection"),d3Zoom=require("module$node_modules$d3_zoom$dist$d3_zoom"),d3Drag=require("module$node_modules$d3_drag$dist$d3_drag"),d3Array=require("module$node_modules$d3_array$dist$d3_array"),throttle=require("module$node_modules$lodash_DOT_throttle$index"),
TWEEN=require("module$node_modules$$tweenjs$tween_js$dist$tween_cjs"),Kapsule=require("module$node_modules$kapsule$dist$kapsule_common");global=require("module$node_modules$accessor_fn$dist$accessor_fn_common");exports=require("module$node_modules$canvas_color_tracker$dist$canvas_color_tracker_common");var d3Force3d=require("module$node_modules$d3_force_3d$dist$d3_force_3d"),bezierJs=require("module$node_modules$bezier_js$dist$bezier_common"),indexBy=require("module$node_modules$index_array_by$dist$index_array_by_common"),
d3Scale=require("module$node_modules$d3_scale$dist$d3_scale");require=require("module$node_modules$d3_scale_chromatic$dist$d3_scale_chromatic");var throttle__default=_interopDefaultLegacy(throttle),TWEEN__default=_interopDefaultLegacy(TWEEN);throttle=_interopDefaultLegacy(Kapsule);var accessorFn__default=_interopDefaultLegacy(global),ColorTracker__default=_interopDefaultLegacy(exports),indexBy__default=_interopDefaultLegacy(indexBy);(function(css,ref){void 0===ref&&(ref={});ref=ref.insertAt;if(css&&
"undefined"!==typeof document){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css";"top"===ref?head.firstChild?head.insertBefore(style,head.firstChild):head.appendChild(style):head.appendChild(style);style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css))}})(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .graph-tooltip {\n  position: absolute;\n  transform: translate(-50%, 25px);\n  font-family: sans-serif;\n  font-size: 16px;\n  padding: 4px;\n  border-radius: 3px;\n  color: #eee;\n  background: rgba(0,0,0,0.65);\n  visibility: hidden; /* by default */\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");
var autoColorScale=d3Scale.scaleOrdinal(require.schemePaired),CanvasForceGraph=throttle["default"]({props:{graphData:{"default":{nodes:[],links:[]},onChange:function(_,state){state.engineRunning=!1}},dagMode:{onChange:function(dagMode,state){!dagMode&&(state.graphData.nodes||[]).forEach(function(n){return n.fx=n.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{"default":function(node){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{"default":4,triggerUpdate:!1},nodeId:{"default":"id"},nodeVal:{"default":"val",
triggerUpdate:!1},nodeColor:{"default":"color",triggerUpdate:!1},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1},nodeCanvasObjectMode:{"default":function(){return"replace"},triggerUpdate:!1},nodeVisibility:{"default":!0,triggerUpdate:!1},linkSource:{"default":"source"},linkTarget:{"default":"target"},linkVisibility:{"default":!0,triggerUpdate:!1},linkColor:{"default":"color",triggerUpdate:!1},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1},linkWidth:{"default":1,triggerUpdate:!1},linkCurvature:{"default":0,
triggerUpdate:!1},linkCanvasObject:{triggerUpdate:!1},linkCanvasObjectMode:{"default":function(){return"replace"},triggerUpdate:!1},linkDirectionalArrowLength:{"default":0,triggerUpdate:!1},linkDirectionalArrowColor:{triggerUpdate:!1},linkDirectionalArrowRelPos:{"default":.5,triggerUpdate:!1},linkDirectionalParticles:{"default":0},linkDirectionalParticleSpeed:{"default":.01,triggerUpdate:!1},linkDirectionalParticleWidth:{"default":4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},
globalScale:{"default":1,triggerUpdate:!1},d3AlphaMin:{"default":0,triggerUpdate:!1},d3AlphaDecay:{"default":.0228,triggerUpdate:!1,onChange:function(alphaDecay,state){state.forceLayout.alphaDecay(alphaDecay)}},d3AlphaTarget:{"default":0,triggerUpdate:!1,onChange:function(alphaTarget,state){state.forceLayout.alphaTarget(alphaTarget)}},d3VelocityDecay:{"default":.4,triggerUpdate:!1,onChange:function(velocityDecay,state){state.forceLayout.velocityDecay(velocityDecay)}},warmupTicks:{"default":0,triggerUpdate:!1},
cooldownTicks:{"default":Infinity,triggerUpdate:!1},cooldownTime:{"default":15E3,triggerUpdate:!1},onUpdate:{"default":function(){},triggerUpdate:!1},onFinishUpdate:{"default":function(){},triggerUpdate:!1},onEngineTick:{"default":function(){},triggerUpdate:!1},onEngineStop:{"default":function(){},triggerUpdate:!1},isShadow:{"default":!1,triggerUpdate:!1}},methods:{d3Force:function(state,forceName,forceFn){if(void 0===forceFn)return state.forceLayout.force(forceName);state.forceLayout.force(forceName,
forceFn);return this},d3ReheatSimulation:function(state){state.forceLayout.alpha(1);this.resetCountdown();return this},resetCountdown:function(state){state.cntTicks=0;state.startTickTime=new Date;state.engineRunning=!0;return this},tickFrame:function(state){function paintArrows(){var getLength=accessorFn__default["default"](state.linkDirectionalArrowLength),getRelPos=accessorFn__default["default"](state.linkDirectionalArrowRelPos),getVisibility=accessorFn__default["default"](state.linkVisibility),
getColor=accessorFn__default["default"](state.linkDirectionalArrowColor||state.linkColor),getNodeVal=accessorFn__default["default"](state.nodeVal),ctx=state.ctx;ctx.save();state.graphData.links.filter(getVisibility).forEach(function(link){var arrowLength=getLength(link);if(arrowLength&&!(0>arrowLength)){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){var startR=Math.sqrt(Math.max(0,getNodeVal(start)||1))*state.nodeRelSize,endR=Math.sqrt(Math.max(0,
getNodeVal(end)||1))*state.nodeRelSize,arrowRelPos=Math.min(1,Math.max(0,getRelPos(link))),arrowColor=getColor(link)||"rgba(0,0,0,0.28)",arrowHalfWidth=arrowLength/1.6/2,bzLine=link.__controlPoints&&_construct(bezierJs.Bezier,[start.x,start.y].concat(_toConsumableArray(link.__controlPoints),[end.x,end.y]));link=bzLine?function(t){return bzLine.get(t)}:function(t){return{x:start.x+(end.x-start.x)*t||0,y:start.y+(end.y-start.y)*t||0}};var lineLen=bzLine?bzLine.length():Math.sqrt(Math.pow(end.x-start.x,
2)+Math.pow(end.y-start.y,2));arrowRelPos=startR+arrowLength+(lineLen-startR-endR-arrowLength)*arrowRelPos;startR=link(arrowRelPos/lineLen);endR=link((arrowRelPos-arrowLength)/lineLen);arrowLength=link((arrowRelPos-.8*arrowLength)/lineLen);link=Math.atan2(startR.y-endR.y,startR.x-endR.x)-Math.PI/2;ctx.beginPath();ctx.moveTo(startR.x,startR.y);ctx.lineTo(endR.x+arrowHalfWidth*Math.cos(link),endR.y+arrowHalfWidth*Math.sin(link));ctx.lineTo(arrowLength.x,arrowLength.y);ctx.lineTo(endR.x-arrowHalfWidth*
Math.cos(link),endR.y-arrowHalfWidth*Math.sin(link));ctx.fillStyle=arrowColor;ctx.fill()}}});ctx.restore()}function paintPhotons(){var getNumPhotons=accessorFn__default["default"](state.linkDirectionalParticles),getSpeed=accessorFn__default["default"](state.linkDirectionalParticleSpeed),getDiameter=accessorFn__default["default"](state.linkDirectionalParticleWidth),getVisibility=accessorFn__default["default"](state.linkVisibility),getColor=accessorFn__default["default"](state.linkDirectionalParticleColor||
state.linkColor),ctx=state.ctx;ctx.save();state.graphData.links.filter(getVisibility).forEach(function(link){var numCyclePhotons=getNumPhotons(link);if(link.hasOwnProperty("__photons")&&link.__photons.length){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){var particleSpeed=getSpeed(link),photons=link.__photons||[],photonR=Math.max(0,getDiameter(link)/2)/Math.sqrt(state.globalScale),photonColor=getColor(link)||"rgba(0,0,0,0.28)";ctx.fillStyle=
photonColor;var bzLine=link.__controlPoints?_construct(bezierJs.Bezier,[start.x,start.y].concat(_toConsumableArray(link.__controlPoints),[end.x,end.y])):null,cyclePhotonIdx=0,needsCleanup=!1;photons.forEach(function(photon){var singleHop=!!photon.__singleHop;photon.hasOwnProperty("__progressRatio")||(photon.__progressRatio=singleHop?0:cyclePhotonIdx/numCyclePhotons);!singleHop&&cyclePhotonIdx++;photon.__progressRatio+=particleSpeed;if(1<=photon.__progressRatio){if(singleHop){needsCleanup=!0;return}photon.__progressRatio%=
1}photon=photon.__progressRatio;photon=bzLine?bzLine.get(photon):{x:start.x+(end.x-start.x)*photon||0,y:start.y+(end.y-start.y)*photon||0};ctx.beginPath();ctx.arc(photon.x,photon.y,photonR,0,2*Math.PI,!1);ctx.fill()});needsCleanup&&(link.__photons=link.__photons.filter(function(photon){return!photon.__singleHop||1>=photon.__progressRatio}))}}});ctx.restore()}!state.isShadow&&state.engineRunning&&(++state.cntTicks>state.cooldownTicks||new Date-state.startTickTime>state.cooldownTime||0<state.d3AlphaMin&&
state.forceLayout.alpha()<state.d3AlphaMin?(state.engineRunning=!1,state.onEngineStop()):(state.forceLayout.tick(),state.onEngineTick()));(function(){var getVisibility=accessorFn__default["default"](state.linkVisibility),getColor=accessorFn__default["default"](state.linkColor),getWidth=accessorFn__default["default"](state.linkWidth),getLineDash=accessorFn__default["default"](state.linkLineDash),getCurvature=accessorFn__default["default"](state.linkCurvature),getLinkCanvasObjectMode=accessorFn__default["default"](state.linkCanvasObjectMode),
ctx=state.ctx,padAmount=2*state.isShadow;getVisibility=state.graphData.links.filter(getVisibility);getVisibility.forEach(function(link){var curvature=getCurvature(link);if(curvature){var start=link.source,end=link.target;if(start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")){var l=Math.sqrt(Math.pow(end.x-start.x,2)+Math.pow(end.y-start.y,2));if(0<l){var a=Math.atan2(end.y-start.y,end.x-start.x);curvature*=l;link.__controlPoints=[(start.x+end.x)/2+curvature*Math.cos(a-Math.PI/2),(start.y+
end.y)/2+curvature*Math.sin(a-Math.PI/2)]}else start=70*curvature,link.__controlPoints=[end.x,end.y-start,end.x+start,end.y]}}else link.__controlPoints=null});var beforeCustomLinks=[],afterCustomLinks=[],defaultPaintLinks=getVisibility;if(state.linkCanvasObject){var replaceCustomLinks=[],otherCustomLinks=[];getVisibility.forEach(function(d){return({before:beforeCustomLinks,after:afterCustomLinks,replace:replaceCustomLinks}[getLinkCanvasObjectMode(d)]||otherCustomLinks).push(d)});defaultPaintLinks=
[].concat(_toConsumableArray(beforeCustomLinks),afterCustomLinks,otherCustomLinks);beforeCustomLinks=beforeCustomLinks.concat(replaceCustomLinks)}ctx.save();beforeCustomLinks.forEach(function(link){return state.linkCanvasObject(link,ctx,state.globalScale)});ctx.restore();getColor=indexBy__default["default"](defaultPaintLinks,[getColor,getWidth,getLineDash]);ctx.save();Object.entries(getColor).forEach(function(_ref){_ref=_slicedToArray(_ref,2);var color=_ref[0],lineColor=color&&"undefined"!==color?
color:"rgba(0,0,0,0.15)";Object.entries(_ref[1]).forEach(function(_ref3){_ref3=_slicedToArray(_ref3,2);var lineWidth=(_ref3[0]||1)/state.globalScale+padAmount;Object.entries(_ref3[1]).forEach(function(_ref5){_ref5=_slicedToArray(_ref5,2);_ref5[0];_ref5=_ref5[1];var lineDashSegments=getLineDash(_ref5[0]);ctx.beginPath();_ref5.forEach(function(link){var start=link.source,end=link.target;start&&end&&start.hasOwnProperty("x")&&end.hasOwnProperty("x")&&(ctx.moveTo(start.x,start.y),(link=link.__controlPoints)?
ctx[2===link.length?"quadraticCurveTo":"bezierCurveTo"].apply(ctx,_toConsumableArray(link).concat([end.x,end.y])):ctx.lineTo(end.x,end.y))});ctx.strokeStyle=lineColor;ctx.lineWidth=lineWidth;ctx.setLineDash(lineDashSegments||[]);ctx.stroke()})})});ctx.restore();ctx.save();afterCustomLinks.forEach(function(link){return state.linkCanvasObject(link,ctx,state.globalScale)});ctx.restore()})();!state.isShadow&&paintArrows();!state.isShadow&&paintPhotons();(function(){var getVisibility=accessorFn__default["default"](state.nodeVisibility),
getVal=accessorFn__default["default"](state.nodeVal),getColor=accessorFn__default["default"](state.nodeColor),getNodeCanvasObjectMode=accessorFn__default["default"](state.nodeCanvasObjectMode),ctx=state.ctx,padAmount=state.isShadow/state.globalScale;getVisibility=state.graphData.nodes.filter(getVisibility);ctx.save();getVisibility.forEach(function(node){var nodeCanvasObjectMode=getNodeCanvasObjectMode(node);if(state.nodeCanvasObject&&("before"===nodeCanvasObjectMode||"replace"===nodeCanvasObjectMode)&&
(state.nodeCanvasObject(node,ctx,state.globalScale),"replace"===nodeCanvasObjectMode)){ctx.restore();return}var r=Math.sqrt(Math.max(0,getVal(node)||1))*state.nodeRelSize+padAmount;ctx.beginPath();ctx.arc(node.x,node.y,r,0,2*Math.PI,!1);ctx.fillStyle=getColor(node)||"rgba(31, 120, 180, 0.92)";ctx.fill();state.nodeCanvasObject&&"after"===nodeCanvasObjectMode&&state.nodeCanvasObject(node,state.ctx,state.globalScale)});ctx.restore()})();return this},emitParticle:function(state,link){link&&(!link.__photons&&
(link.__photons=[]),link.__photons.push({__singleHop:!0}));return this}},stateInit:function(){return{forceLayout:d3Force3d.forceSimulation().force("link",d3Force3d.forceLink()).force("charge",d3Force3d.forceManyBody()).force("center",d3Force3d.forceCenter()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(canvasCtx,state){state.ctx=canvasCtx},update:function(state){state.engineRunning=!1;state.onUpdate();null!==state.nodeAutoColorBy&&autoColorObjects(state.graphData.nodes,accessorFn__default["default"](state.nodeAutoColorBy),
state.nodeColor);null!==state.linkAutoColorBy&&autoColorObjects(state.graphData.links,accessorFn__default["default"](state.linkAutoColorBy),state.linkColor);state.graphData.links.forEach(function(link){link.source=link[state.linkSource];link.target=link[state.linkTarget]});if(!state.isShadow){var linkParticlesAccessor=accessorFn__default["default"](state.linkDirectionalParticles);state.graphData.links.forEach(function(link){var numPhotons=Math.round(Math.abs(linkParticlesAccessor(link)));numPhotons?
link.__photons=_toConsumableArray(Array(numPhotons)).map(function(){return{}}):delete link.__photons})}state.forceLayout.stop().alpha(1).nodes(state.graphData.nodes);var linkForce=state.forceLayout.force("link");linkForce&&linkForce.id(function(d){return d[state.nodeId]}).links(state.graphData.links);var nodeDepths=state.dagMode&&getDagDepths(state.graphData,function(node){return node[state.nodeId]},{nodeFilter:state.dagNodeFilter,onLoopError:state.onDagError||void 0}),maxDepth=Math.max.apply(Math,
_toConsumableArray(Object.values(nodeDepths||[]))),dagLevelDistance=state.dagLevelDistance||state.graphData.nodes.length/(maxDepth||1)*2*(-1!==["radialin","radialout"].indexOf(state.dagMode)?.7:1);if(state.dagMode){linkForce=function(fix,invert){return function(node){return fix?(nodeDepths[node[state.nodeId]]-maxDepth/2)*dagLevelDistance*(invert?-1:1):void 0}};var fxFn=linkForce(-1!==["lr","rl"].indexOf(state.dagMode),"rl"===state.dagMode),fyFn=linkForce(-1!==["td","bu"].indexOf(state.dagMode),"bu"===
state.dagMode);state.graphData.nodes.filter(state.dagNodeFilter).forEach(function(node){node.fx=fxFn(node);node.fy=fyFn(node)})}state.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(state.dagMode)?d3Force3d.forceRadial(function(node){node=nodeDepths[node[state.nodeId]]||-1;return("radialin"===state.dagMode?maxDepth-node:node)*dagLevelDistance}).strength(function(node){return state.dagNodeFilter(node)?1:0}):null);for(linkForce=0;linkForce<state.warmupTicks&&!(0<state.d3AlphaMin&&
state.forceLayout.alpha()<state.d3AlphaMin);linkForce++)state.forceLayout.tick();this.resetCountdown();state.onFinishUpdate()}}),bindFG=linkKapsule("forceGraph",CanvasForceGraph),bindBoth=linkKapsule(["forceGraph","shadowGraph"],CanvasForceGraph);require=Object.assign.apply(Object,_toConsumableArray("nodeColor nodeAutoColorBy nodeCanvasObject nodeCanvasObjectMode linkColor linkAutoColorBy linkLineDash linkWidth linkCanvasObject linkCanvasObjectMode linkDirectionalArrowLength linkDirectionalArrowColor linkDirectionalArrowRelPos linkDirectionalParticles linkDirectionalParticleSpeed linkDirectionalParticleWidth linkDirectionalParticleColor dagMode dagLevelDistance dagNodeFilter onDagError d3AlphaMin d3AlphaDecay d3VelocityDecay warmupTicks cooldownTicks cooldownTime onEngineTick onEngineStop".split(" ").map(function(p){return _defineProperty({},
p,bindFG.linkProp(p))})).concat(_toConsumableArray("nodeRelSize nodeId nodeVal nodeVisibility linkSource linkTarget linkVisibility linkCurvature".split(" ").map(function(p){return _defineProperty({},p,bindBoth.linkProp(p))}))));global=Object.assign.apply(Object,_toConsumableArray(["d3Force","d3ReheatSimulation","emitParticle"].map(function(p){return _defineProperty({},p,bindFG.linkMethod(p))})));require=throttle["default"]({props:_objectSpread2({width:{"default":window.innerWidth,onChange:function(_,
state){return adjustCanvasSize(state)},triggerUpdate:!1},height:{"default":window.innerHeight,onChange:function(_,state){return adjustCanvasSize(state)},triggerUpdate:!1},graphData:{"default":{nodes:[],links:[]},onChange:function(d$jscomp$0,state){(d$jscomp$0.nodes.length||d$jscomp$0.links.length)&&console.info("force-graph loading",d$jscomp$0.nodes.length+" nodes",d$jscomp$0.links.length+" links");[{type:"Node",objs:d$jscomp$0.nodes},{type:"Link",objs:d$jscomp$0.links}].forEach(function(_ref4){var type=
_ref4.type;_ref4.objs.filter(function(d){if(!d.hasOwnProperty("__indexColor"))return!0;var cur=state.colorTracker.lookup(d.__indexColor);return!cur||!cur.hasOwnProperty("d")||cur.d!==d}).forEach(function(d){d.__indexColor=state.colorTracker.register({type,d})})});state.forceGraph.graphData(d$jscomp$0);state.shadowGraph.graphData(d$jscomp$0)},triggerUpdate:!1},backgroundColor:{onChange:function(color,state){state.canvas&&color&&(state.canvas.style.background=color)},triggerUpdate:!1},nodeLabel:{"default":"name",
triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(paintFn,state){state.shadowGraph.nodeCanvasObject(paintFn?function(node,ctx,globalScale){return paintFn(node,node.__indexColor,ctx,globalScale)}:null)},triggerUpdate:!1},linkLabel:{"default":"name",triggerUpdate:!1},linkHoverPrecision:{"default":4,triggerUpdate:!1},enableNodeDrag:{"default":!0,triggerUpdate:!1},enableZoomPanInteraction:{"default":!0,triggerUpdate:!1},enablePointerInteraction:{"default":!0,onChange:function(_,state){state.hoverObj=
null},triggerUpdate:!1},onNodeDrag:{"default":function(){},triggerUpdate:!1},onNodeDragEnd:{"default":function(){},triggerUpdate:!1},onNodeClick:{"default":function(){},triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{"default":function(){},triggerUpdate:!1},onLinkClick:{"default":function(){},triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{"default":function(){},triggerUpdate:!1},onBackgroundClick:{"default":function(){},triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},
onZoom:{"default":function(){},triggerUpdate:!1},onZoomEnd:{"default":function(){},triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},require),aliases:{stopAnimation:"pauseAnimation"},methods:_objectSpread2({graph2ScreenCoords:function(state,x,y){state=d3Zoom.zoomTransform(state.canvas);return{x:x*state.k+state.x,y:y*state.k+state.y}},screen2GraphCoords:function(state,x,y){state=d3Zoom.zoomTransform(state.canvas);return{x:(x-state.x)/state.k,y:(y-state.y)/
state.k}},centerAt:function(state,x$jscomp$0,y,transitionDuration){function getCenter(){var t=d3Zoom.zoomTransform(state.canvas);return{x:(state.width/2-t.x)/t.k,y:(state.height/2-t.y)/t.k}}function setCenter(_ref5){var x=_ref5.x;_ref5=_ref5.y;state.zoom.translateTo(state.zoom.__baseElem,void 0===x?getCenter().x:x,void 0===_ref5?getCenter().y:_ref5)}return state.canvas?void 0!==x$jscomp$0||void 0!==y?(x$jscomp$0=Object.assign({},void 0!==x$jscomp$0?{x:x$jscomp$0}:{},void 0!==y?{y}:{}),transitionDuration?
(new TWEEN__default["default"].Tween(getCenter())).to(x$jscomp$0,transitionDuration).easing(TWEEN__default["default"].Easing.Quadratic.Out).onUpdate(setCenter).start():setCenter(x$jscomp$0),this):getCenter():null},zoom:function(state,k,transitionDuration){return state.canvas?void 0!==k?(transitionDuration?(new TWEEN__default["default"].Tween({k:d3Zoom.zoomTransform(state.canvas).k})).to({k},transitionDuration).easing(TWEEN__default["default"].Easing.Quadratic.Out).onUpdate(function(_ref6){state.zoom.scaleTo(state.zoom.__baseElem,
_ref6.k)}).start():state.zoom.scaleTo(state.zoom.__baseElem,k),this):d3Zoom.zoomTransform(state.canvas).k:null},zoomToFit:function(state){for(var transitionDuration=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,padding=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,_len=arguments.length,bboxArgs=Array(3<_len?_len-3:0),_key=3;_key<_len;_key++)bboxArgs[_key-3]=arguments[_key];if(_len=this.getGraphBbox.apply(this,bboxArgs))padding=Math.max(1E-12,Math.min(1E12,(state.width-2*padding)/
(_len.x[1]-_len.x[0]),(state.height-2*padding)/(_len.y[1]-_len.y[0]))),this.centerAt((_len.x[0]+_len.x[1])/2,(_len.y[0]+_len.y[1])/2,transitionDuration),this.zoom(padding,transitionDuration);return this},getGraphBbox:function(state){var nodeFilter=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},getVal=accessorFn__default["default"](state.nodeVal);nodeFilter=state.graphData.nodes.filter(nodeFilter).map(function(node){return{x:node.x,y:node.y,r:Math.sqrt(Math.max(0,getVal(node)||
1))*state.nodeRelSize}});return nodeFilter.length?{x:[d3Array.min(nodeFilter,function(node){return node.x-node.r}),d3Array.max(nodeFilter,function(node){return node.x+node.r})],y:[d3Array.min(nodeFilter,function(node){return node.y-node.r}),d3Array.max(nodeFilter,function(node){return node.y+node.r})]}:null},pauseAnimation:function(state){state.animationFrameRequestId&&(cancelAnimationFrame(state.animationFrameRequestId),state.animationFrameRequestId=null);return this},resumeAnimation:function(state){state.animationFrameRequestId||
this._animationCycle();return this},_destructor:function(){this.pauseAnimation();this.graphData({nodes:[],links:[]})}},global),stateInit:function(){return{lastSetZoom:1,forceGraph:new CanvasForceGraph,shadowGraph:(new CanvasForceGraph).cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new ColorTracker__default["default"]}},init:function(domNode,state){domNode.innerHTML="";var container=document.createElement("div");container.classList.add("force-graph-container");
container.style.position="relative";domNode.appendChild(container);state.canvas=document.createElement("canvas");state.backgroundColor&&(state.canvas.style.background=state.backgroundColor);container.appendChild(state.canvas);state.shadowCanvas=document.createElement("canvas");var ctx=state.canvas.getContext("2d"),shadowCtx=state.shadowCanvas.getContext("2d");d3Selection.select(state.canvas).call(d3Drag.drag().subject(function(){if(!state.enableNodeDrag)return null;var obj=state.hoverObj;return obj&&
"Node"===obj.type?obj.d:null}).on("start",function(ev){var obj=ev.subject;obj.__initialDragPos={x:obj.x,y:obj.y,fx:obj.fx,fy:obj.fy};ev.active||(obj.fx=obj.x,obj.fy=obj.y);state.canvas.classList.add("grabbable")}).on("drag",function(ev){var obj=ev.subject,initPos=obj.__initialDragPos,k=d3Zoom.zoomTransform(state.canvas).k,translate={x:initPos.x+(ev.x-initPos.x)/k-obj.x,y:initPos.y+(ev.y-initPos.y)/k-obj.y};["x","y"].forEach(function(c){return obj["f".concat(c)]=obj[c]=initPos[c]+(ev[c]-initPos[c])/
k});state.forceGraph.d3AlphaTarget(.3).resetCountdown();obj.__dragged=!0;state.onNodeDrag(obj,translate)}).on("end",function(ev){ev=ev.subject;var initPos=ev.__initialDragPos,translate={x:ev.x-initPos.x,y:ev.y-initPos.y};void 0===initPos.fx&&(ev.fx=void 0);void 0===initPos.fy&&(ev.fy=void 0);delete ev.__initialDragPos;state.forceGraph.d3AlphaTarget(0).resetCountdown();state.canvas.classList.remove("grabbable");state.isPointerDragging=!1;ev.__dragged&&(delete ev.__dragged,state.onNodeDragEnd(ev,translate))}));
state.zoom=d3Zoom.zoom();state.zoom(state.zoom.__baseElem=d3Selection.select(state.canvas));state.zoom.__baseElem.on("dblclick.zoom",null);state.zoom.filter(function(ev){return state.enableZoomPanInteraction?!ev.button:!1}).scaleExtent([.01,1E3]).on("zoom",function(){var t=d3Zoom.zoomTransform(this);[ctx,shadowCtx].forEach(function(c){resetTransform(c);c.translate(t.x,t.y);c.scale(t.k,t.k)});state.onZoom(_objectSpread2({},t))}).on("end",function(){var t=d3Zoom.zoomTransform(this);state.onZoomEnd(_objectSpread2({},
t))});adjustCanvasSize(state);state.forceGraph.onFinishUpdate(function(){d3Zoom.zoomTransform(state.canvas).k===state.lastSetZoom&&state.graphData.nodes.length&&state.zoom.scaleTo(state.zoom.__baseElem,state.lastSetZoom=4/Math.cbrt(state.graphData.nodes.length))});var toolTipElem=document.createElement("div");toolTipElem.classList.add("graph-tooltip");container.appendChild(toolTipElem);var JSCompiler_object_inline_x_2604=-1E12,JSCompiler_object_inline_y_2605=-1E12;["pointermove","pointerdown"].forEach(function(evType){return container.addEventListener(evType,
function(ev){!state.isPointerDragging&&"pointermove"===ev.type&&0<ev.pressure&&[ev.movementX,ev.movementY].some(function(m){return Math.abs(m)>("touch"===ev.pointerType?1:0)})&&(state.isPointerDragging=!0);var offset=function(el){el=el.getBoundingClientRect();return{top:el.top+(window.pageYOffset||document.documentElement.scrollTop),left:el.left+(window.pageXOffset||document.documentElement.scrollLeft)}}(container);JSCompiler_object_inline_x_2604=ev.pageX-offset.left;JSCompiler_object_inline_y_2605=
ev.pageY-offset.top;toolTipElem.style.top="".concat(JSCompiler_object_inline_y_2605,"px");toolTipElem.style.left="".concat(JSCompiler_object_inline_x_2604,"px")},{passive:!0})});container.addEventListener("pointerup",function(ev){state.isPointerDragging?state.isPointerDragging=!1:requestAnimationFrame(function(){if(0===ev.button)if(state.hoverObj)state["on".concat(state.hoverObj.type,"Click")](state.hoverObj.d,ev);else state.onBackgroundClick(ev);if(2===ev.button)if(state.hoverObj){var fn=state["on".concat(state.hoverObj.type,
"RightClick")];fn&&fn(state.hoverObj.d,ev)}else state.onBackgroundRightClick&&state.onBackgroundRightClick(ev)})},{passive:!0});container.addEventListener("contextmenu",function(ev){if(!state.onBackgroundRightClick&&!state.onNodeRightClick&&!state.onLinkRightClick)return!0;ev.preventDefault();return!1});state.forceGraph(ctx);state.shadowGraph(shadowCtx);var refreshShadowCanvas=throttle__default["default"](function(){clearCanvas(shadowCtx,state.width,state.height);state.shadowGraph.linkWidth(function(l){return accessorFn__default["default"](state.linkWidth)(l)+
state.linkHoverPrecision});var t=d3Zoom.zoomTransform(state.canvas);state.shadowGraph.globalScale(t.k).tickFrame()},800);(this._animationCycle=function animate(){if(state.enablePointerInteraction){var obj=null;if(!state.isPointerDragging){var pxScale=window.devicePixelRatio;(pxScale=0<JSCompiler_object_inline_x_2604&&0<JSCompiler_object_inline_y_2605?shadowCtx.getImageData(JSCompiler_object_inline_x_2604*pxScale,JSCompiler_object_inline_y_2605*pxScale,1,1):null)&&(obj=state.colorTracker.lookup(pxScale.data))}if(obj!==
state.hoverObj){var prevObjType=(pxScale=state.hoverObj)?pxScale.type:null,objType=obj?obj.type:null;if(prevObjType&&prevObjType!==objType)state["on".concat(prevObjType,"Hover")](null,pxScale.d);if(objType)state["on".concat(objType,"Hover")](obj.d,prevObjType===objType?pxScale.d:null);pxScale=obj?accessorFn__default["default"](state["".concat(obj.type.toLowerCase(),"Label")])(obj.d)||"":"";toolTipElem.style.visibility=pxScale?"visible":"hidden";toolTipElem.innerHTML=pxScale;state.hoverObj=obj}refreshShadowCanvas()}clearCanvas(ctx,
state.width,state.height);obj=d3Zoom.zoomTransform(state.canvas).k;state.onRenderFramePre&&state.onRenderFramePre(ctx,obj);state.forceGraph.globalScale(obj).tickFrame();state.onRenderFramePost&&state.onRenderFramePost(ctx,obj);TWEEN__default["default"].update();state.animationFrameRequestId=requestAnimationFrame(animate)})()},update:function(state){}});module.exports=require}
//# sourceMappingURL=module$node_modules$force_graph$dist$force_graph_common.js.map
