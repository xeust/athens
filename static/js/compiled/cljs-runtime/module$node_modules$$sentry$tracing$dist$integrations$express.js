shadow$provide.module$node_modules$$sentry$tracing$dist$integrations$express=function(global,require,module,exports){function wrap(fn){var arity=fn.length;switch(arity){case 2:return function(_req,res){var transaction=res.__sentry_transaction;if(transaction){var span_1=transaction.startChild({description:fn.name,op:"middleware"});res.once("finish",function(){span_1.finish()})}return fn.apply(this,arguments)};case 3:return function(req,res,next){var transaction=res.__sentry_transaction,span=transaction&&
transaction.startChild({description:fn.name,op:"middleware"});fn.call(this,req,res,function(){span&&span.finish();return next.apply(this,arguments)})};case 4:return function(err,req,res,next){var transaction=res.__sentry_transaction,span=transaction&&transaction.startChild({description:fn.name,op:"middleware"});fn.call(this,err,req,res,function(){span&&span.finish();return next.apply(this,arguments)})};default:throw Error("Express middleware takes 2-4 arguments. Got: "+arity);}}function wrapUseArgs(args){return Array.from(args).map(function(arg){return"function"===
typeof arg?wrap(arg):Array.isArray(arg)?arg.map(function(a){return"function"===typeof a?wrap(a):a}):arg})}function patchMiddleware(app,method){var originalAppCallback=app[method];app[method]=function(){return originalAppCallback.apply(this,wrapUseArgs(arguments))};return app}function routeMiddlewares(app,methods){void 0===methods&&(methods=[]);methods.forEach(function(method){patchMiddleware(app,method)})}Object.defineProperty(exports,"__esModule",{value:!0});var utils_1=require("module$node_modules$$sentry$utils$dist$index");
global=function(){function Express(options){void 0===options&&(options={});this.name=Express.id;this._app=options.app;this._methods=options.methods}Express.prototype.setupOnce=function(){this._app?(patchMiddleware(this._app,"use"),routeMiddlewares(this._app,this._methods)):utils_1.logger.error("ExpressIntegration is missing an Express instance")};Express.id="Express";return Express}();exports.Express=global}
//# sourceMappingURL=module$node_modules$$sentry$tracing$dist$integrations$express.js.map
