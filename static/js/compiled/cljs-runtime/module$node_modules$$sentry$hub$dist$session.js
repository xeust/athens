shadow$provide.module$node_modules$$sentry$hub$dist$session=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});var types_1=require("module$node_modules$$sentry$types$dist$index"),utils_1=require("module$node_modules$$sentry$utils$dist$index");global=function(){function Session(context){this.errors=0;this.sid=utils_1.uuid4();this.timestamp=Date.now();this.started=Date.now();this.duration=0;this.status=types_1.SessionStatus.Ok;context&&this.update(context)}
Session.prototype.update=function(context){void 0===context&&(context={});context.user&&(context.user.ip_address&&(this.ipAddress=context.user.ip_address),context.did||(this.did=context.user.id||context.user.email||context.user.username));this.timestamp=context.timestamp||Date.now();context.sid&&(this.sid=32===context.sid.length?context.sid:utils_1.uuid4());context.did&&(this.did=""+context.did);"number"===typeof context.started&&(this.started=context.started);this.duration="number"===typeof context.duration?
context.duration:this.timestamp-this.started;context.release&&(this.release=context.release);context.environment&&(this.environment=context.environment);context.ipAddress&&(this.ipAddress=context.ipAddress);context.userAgent&&(this.userAgent=context.userAgent);"number"===typeof context.errors&&(this.errors=context.errors);context.status&&(this.status=context.status)};Session.prototype.close=function(status){status?this.update({status}):this.status===types_1.SessionStatus.Ok?this.update({status:types_1.SessionStatus.Exited}):
this.update()};Session.prototype.toJSON=function(){return utils_1.dropUndefinedKeys({sid:""+this.sid,init:!0,started:(new Date(this.started)).toISOString(),timestamp:(new Date(this.timestamp)).toISOString(),status:this.status,errors:this.errors,did:"number"===typeof this.did||"string"===typeof this.did?""+this.did:void 0,duration:this.duration,attrs:utils_1.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})};return Session}();
exports.Session=global}
//# sourceMappingURL=module$node_modules$$sentry$hub$dist$session.js.map
