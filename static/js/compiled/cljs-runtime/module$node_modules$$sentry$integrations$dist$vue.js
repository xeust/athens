shadow$provide.module$node_modules$$sentry$integrations$dist$vue=function(global,require,module,exports){function getActiveTransaction(hub){if(hub&&hub.getScope&&(hub=hub.getScope()))return hub.getTransaction()}Object.defineProperty(exports,"__esModule",{value:!0});var tslib_1=require("module$node_modules$tslib$tslib"),utils_1=require("module$node_modules$$sentry$utils$dist$index"),TRACING_GETTER={id:"Tracing"},BROWSER_TRACING_GETTER={id:"BrowserTracing"},HOOKS={activate:["activated","deactivated"],
create:["beforeCreate","created"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]},COMPONENT_NAME_REGEXP=/(?:^|[-_/])(\w)/g;global=function(){function Vue(options){var _this=this;this.name=Vue.id;this._componentsCache={};this._applyTracingHooks=function(vm,getCurrentHub){if(!vm.$options.$_sentryPerfHook){vm.$options.$_sentryPerfHook=!0;var name=_this._getComponentName(vm),rootMount="root"===name,spans={},rootHandler=function(hook){var now=utils_1.timestampWithMs();
_this._rootSpan?_this._finishRootSpan(now,getCurrentHub):vm.$once("hook:"+hook,function(){var tracingIntegration=getCurrentHub().getIntegration(TRACING_GETTER);if(tracingIntegration){if(_this._tracingActivity=tracingIntegration.constructor.pushActivity("Vue Application Render"),tracingIntegration=tracingIntegration.constructor.getTransaction())_this._rootSpan=tracingIntegration.startChild({description:"Application Render",op:"Vue"})}else if(tracingIntegration=getActiveTransaction(getCurrentHub()))_this._rootSpan=
tracingIntegration.startChild({description:"Application Render",op:"Vue"})})},childHandler=function(hook,operation){var shouldTrack=Array.isArray(_this._options.tracingOptions.trackComponents)?-1<_this._options.tracingOptions.trackComponents.indexOf(name):_this._options.tracingOptions.trackComponents;if(_this._rootSpan&&shouldTrack){shouldTrack=utils_1.timestampWithMs();var span=spans[operation];span?(span.finish(),_this._finishRootSpan(shouldTrack,getCurrentHub)):vm.$once("hook:"+hook,function(){_this._rootSpan&&
(spans[operation]=_this._rootSpan.startChild({description:"Vue \x3c"+name+"\x3e",op:operation}))})}};_this._options.tracingOptions.hooks.forEach(function(operation){var internalHooks=HOOKS[operation];internalHooks?internalHooks.forEach(function(internalHook){var handler=rootMount?rootHandler.bind(_this,internalHook):childHandler.bind(_this,internalHook,operation),currentValue=vm.$options[internalHook];Array.isArray(currentValue)?vm.$options[internalHook]=tslib_1.__spread([handler],currentValue):vm.$options[internalHook]=
"function"===typeof currentValue?[handler,currentValue]:[handler]}):utils_1.logger.warn("Unknown hook: "+operation)})}};utils_1.logger.log("You are still using the Vue.js integration, consider moving to @sentry/vue");this._options=tslib_1.__assign(tslib_1.__assign({Vue:utils_1.getGlobalObject().Vue,attachProps:!0,logErrors:!1,tracing:!1},options),{tracingOptions:tslib_1.__assign({hooks:["mount","update"],timeout:2E3,trackComponents:!1},options.tracingOptions)})}Vue.prototype.setupOnce=function(_,
getCurrentHub){this._options.Vue?(this._attachErrorHandler(getCurrentHub),this._options.tracing&&this._startTracing(getCurrentHub)):utils_1.logger.error("Vue integration is missing a Vue instance")};Vue.prototype._getComponentName=function(vm){return vm?vm.$root===vm?"root":vm.$options?vm.$options.name?vm.$options.name:vm.$options._componentTag?vm.$options._componentTag:vm.$options.__file?(vm=vm.$options.__file.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"),vm=utils_1.basename(vm,".vue"),this._componentsCache[vm]||
(this._componentsCache[vm]=vm.replace(COMPONENT_NAME_REGEXP,function(_,c){return c?c.toUpperCase():""}))):"anonymous component":"anonymous component":"anonymous component"};Vue.prototype._finishRootSpan=function(timestamp,getCurrentHub){var _this=this;this._rootSpanTimer&&clearTimeout(this._rootSpanTimer);this._rootSpanTimer=setTimeout(function(){if(_this._tracingActivity){var tracingIntegration=getCurrentHub().getIntegration(TRACING_GETTER);tracingIntegration&&tracingIntegration.constructor.popActivity(_this._tracingActivity)}_this._rootSpan&&
_this._rootSpan.finish(timestamp)},this._options.tracingOptions.timeout)};Vue.prototype._startTracing=function(getCurrentHub){var applyTracingHooks=this._applyTracingHooks;this._options.Vue.mixin({beforeCreate:function(){getCurrentHub().getIntegration(TRACING_GETTER)||getCurrentHub().getIntegration(BROWSER_TRACING_GETTER)?applyTracingHooks(this,getCurrentHub):utils_1.logger.error("Vue integration has tracing enabled, but Tracing integration is not configured")}})};Vue.prototype._attachErrorHandler=
function(getCurrentHub){var _this=this,currentErrorHandler=this._options.Vue.config.errorHandler;this._options.Vue.config.errorHandler=function(error,vm,info){var metadata={};if(vm)try{metadata.componentName=_this._getComponentName(vm),_this._options.attachProps&&(metadata.propsData=vm.$options.propsData)}catch(_oO){utils_1.logger.warn("Unable to extract metadata from Vue component.")}info&&(metadata.lifecycleHook=info);getCurrentHub().getIntegration(Vue)&&setTimeout(function(){getCurrentHub().withScope(function(scope){scope.setContext("vue",
metadata);getCurrentHub().captureException(error)})});"function"===typeof currentErrorHandler&&currentErrorHandler.call(_this._options.Vue,error,vm,info);_this._options.logErrors&&(_this._options.Vue.util&&_this._options.Vue.util.warn("Error in "+info+': "'+(error&&error.toString())+'"',vm),console.error(error))}};Vue.id="Vue";return Vue}();exports.Vue=global;exports.getActiveTransaction=getActiveTransaction}
//# sourceMappingURL=module$node_modules$$sentry$integrations$dist$vue.js.map
