{
"version":3,
"file":"module$node_modules$$sentry$browser$dist$integrations$globalhandlers.js",
"lineCount":10,
"mappings":"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",
"sources":["node_modules/@sentry/browser/dist/integrations/globalhandlers.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$sentry$browser$dist$integrations$globalhandlers\"] = function(global,require,module,exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\n/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nvar core_1 = require(\"@sentry/core\");\nvar types_1 = require(\"@sentry/types\");\nvar utils_1 = require(\"@sentry/utils\");\nvar eventbuilder_1 = require(\"../eventbuilder\");\nvar helpers_1 = require(\"../helpers\");\n/** Global handlers */\nvar GlobalHandlers = /** @class */ (function () {\n    /** JSDoc */\n    function GlobalHandlers(options) {\n        /**\n         * @inheritDoc\n         */\n        this.name = GlobalHandlers.id;\n        /** JSDoc */\n        this._onErrorHandlerInstalled = false;\n        /** JSDoc */\n        this._onUnhandledRejectionHandlerInstalled = false;\n        this._options = tslib_1.__assign({ onerror: true, onunhandledrejection: true }, options);\n    }\n    /**\n     * @inheritDoc\n     */\n    GlobalHandlers.prototype.setupOnce = function () {\n        Error.stackTraceLimit = 50;\n        if (this._options.onerror) {\n            utils_1.logger.log('Global Handler attached: onerror');\n            this._installGlobalOnErrorHandler();\n        }\n        if (this._options.onunhandledrejection) {\n            utils_1.logger.log('Global Handler attached: onunhandledrejection');\n            this._installGlobalOnUnhandledRejectionHandler();\n        }\n    };\n    /** JSDoc */\n    GlobalHandlers.prototype._installGlobalOnErrorHandler = function () {\n        var _this = this;\n        if (this._onErrorHandlerInstalled) {\n            return;\n        }\n        utils_1.addInstrumentationHandler({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            callback: function (data) {\n                var error = data.error;\n                var currentHub = core_1.getCurrentHub();\n                var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n                var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n                if (!hasIntegration || helpers_1.shouldIgnoreOnError() || isFailedOwnDelivery) {\n                    return;\n                }\n                var client = currentHub.getClient();\n                var event = utils_1.isPrimitive(error)\n                    ? _this._eventFromIncompleteOnError(data.msg, data.url, data.line, data.column)\n                    : _this._enhanceEventWithInitialFrame(eventbuilder_1.eventFromUnknownInput(error, undefined, {\n                        attachStacktrace: client && client.getOptions().attachStacktrace,\n                        rejection: false,\n                    }), data.url, data.line, data.column);\n                utils_1.addExceptionMechanism(event, {\n                    handled: false,\n                    type: 'onerror',\n                });\n                currentHub.captureEvent(event, {\n                    originalException: error,\n                });\n            },\n            type: 'error',\n        });\n        this._onErrorHandlerInstalled = true;\n    };\n    /** JSDoc */\n    GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler = function () {\n        var _this = this;\n        if (this._onUnhandledRejectionHandlerInstalled) {\n            return;\n        }\n        utils_1.addInstrumentationHandler({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            callback: function (e) {\n                var error = e;\n                // dig the object of the rejection out of known event types\n                try {\n                    // PromiseRejectionEvents store the object of the rejection under 'reason'\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent\n                    if ('reason' in e) {\n                        error = e.reason;\n                    }\n                    // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents\n                    // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into\n                    // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec\n                    // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and\n                    // https://github.com/getsentry/sentry-javascript/issues/2380\n                    else if ('detail' in e && 'reason' in e.detail) {\n                        error = e.detail.reason;\n                    }\n                }\n                catch (_oO) {\n                    // no-empty\n                }\n                var currentHub = core_1.getCurrentHub();\n                var hasIntegration = currentHub.getIntegration(GlobalHandlers);\n                var isFailedOwnDelivery = error && error.__sentry_own_request__ === true;\n                if (!hasIntegration || helpers_1.shouldIgnoreOnError() || isFailedOwnDelivery) {\n                    return true;\n                }\n                var client = currentHub.getClient();\n                var event = utils_1.isPrimitive(error)\n                    ? _this._eventFromIncompleteRejection(error)\n                    : eventbuilder_1.eventFromUnknownInput(error, undefined, {\n                        attachStacktrace: client && client.getOptions().attachStacktrace,\n                        rejection: true,\n                    });\n                event.level = types_1.Severity.Error;\n                utils_1.addExceptionMechanism(event, {\n                    handled: false,\n                    type: 'onunhandledrejection',\n                });\n                currentHub.captureEvent(event, {\n                    originalException: error,\n                });\n                return;\n            },\n            type: 'unhandledrejection',\n        });\n        this._onUnhandledRejectionHandlerInstalled = true;\n    };\n    /**\n     * This function creates a stack from an old, error-less onerror handler.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    GlobalHandlers.prototype._eventFromIncompleteOnError = function (msg, url, line, column) {\n        var ERROR_TYPES_RE = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n        // If 'message' is ErrorEvent, get real message from inside\n        var message = utils_1.isErrorEvent(msg) ? msg.message : msg;\n        var name;\n        if (utils_1.isString(message)) {\n            var groups = message.match(ERROR_TYPES_RE);\n            if (groups) {\n                name = groups[1];\n                message = groups[2];\n            }\n        }\n        var event = {\n            exception: {\n                values: [\n                    {\n                        type: name || 'Error',\n                        value: message,\n                    },\n                ],\n            },\n        };\n        return this._enhanceEventWithInitialFrame(event, url, line, column);\n    };\n    /**\n     * This function creates an Event from an TraceKitStackTrace that has part of it missing.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    GlobalHandlers.prototype._eventFromIncompleteRejection = function (error) {\n        return {\n            exception: {\n                values: [\n                    {\n                        type: 'UnhandledRejection',\n                        value: \"Non-Error promise rejection captured with value: \" + error,\n                    },\n                ],\n            },\n        };\n    };\n    /** JSDoc */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    GlobalHandlers.prototype._enhanceEventWithInitialFrame = function (event, url, line, column) {\n        event.exception = event.exception || {};\n        event.exception.values = event.exception.values || [];\n        event.exception.values[0] = event.exception.values[0] || {};\n        event.exception.values[0].stacktrace = event.exception.values[0].stacktrace || {};\n        event.exception.values[0].stacktrace.frames = event.exception.values[0].stacktrace.frames || [];\n        var colno = isNaN(parseInt(column, 10)) ? undefined : column;\n        var lineno = isNaN(parseInt(line, 10)) ? undefined : line;\n        var filename = utils_1.isString(url) && url.length > 0 ? url : utils_1.getLocationHref();\n        if (event.exception.values[0].stacktrace.frames.length === 0) {\n            event.exception.values[0].stacktrace.frames.push({\n                colno: colno,\n                filename: filename,\n                function: '?',\n                in_app: true,\n                lineno: lineno,\n            });\n        }\n        return event;\n    };\n    /**\n     * @inheritDoc\n     */\n    GlobalHandlers.id = 'GlobalHandlers';\n    return GlobalHandlers;\n}());\nexports.GlobalHandlers = GlobalHandlers;\n//# sourceMappingURL=globalhandlers.js.map\n};"],
"names":["shadow$provide","global","require","module","exports","Object","defineProperty","value","tslib_1","core_1","types_1","utils_1","eventbuilder_1","helpers_1","GlobalHandlers","options","name","id","_onUnhandledRejectionHandlerInstalled","_onErrorHandlerInstalled","_options","__assign","onerror","onunhandledrejection","prototype","setupOnce","GlobalHandlers.prototype.setupOnce","Error","stackTraceLimit","logger","log","_installGlobalOnErrorHandler","_installGlobalOnUnhandledRejectionHandler","GlobalHandlers.prototype._installGlobalOnErrorHandler","_this","addInstrumentationHandler","callback","data","error","currentHub","getCurrentHub","hasIntegration","getIntegration","isFailedOwnDelivery","__sentry_own_request__","shouldIgnoreOnError","client","getClient","event","isPrimitive","_eventFromIncompleteOnError","msg","url","line","column","_enhanceEventWithInitialFrame","eventFromUnknownInput","undefined","attachStacktrace","getOptions","rejection","addExceptionMechanism","handled","type","captureEvent","originalException","GlobalHandlers.prototype._installGlobalOnUnhandledRejectionHandler","e","reason","detail","_oO","_eventFromIncompleteRejection","level","Severity","GlobalHandlers.prototype._eventFromIncompleteOnError","ERROR_TYPES_RE","message","isErrorEvent","isString","groups","match","exception","values","GlobalHandlers.prototype._eventFromIncompleteRejection","GlobalHandlers.prototype._enhanceEventWithInitialFrame","stacktrace","frames","colno","isNaN","parseInt","lineno","filename","length","getLocationHref","push","function","in_app"]
}
